//!wrt $BSPEC:{"icn":null,"cpr":"Copyright (C) Windows 96 Team 2023.","dsc":"Live CSS editing program","frn":"Live CSS editing program","ver":1,"ssy":"gui"}

const CSS_CODE="\n.livecss-window {\n    height: 400px;\n    width: 400px;\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    background: rgb(0, 0, 0, 0.8);\n    z-index: 20;\n    border: 1px solid white;\n    display: flex;\n    flex-direction: column;\n    font-family: tahoma, verdana;\n    color: white;\n    font-size: 13px;\n    box-shadow: 0px 0px 5px 0px black;\n    z-index: 2147483647;\n}\n\n.livecss-window>.lc-tbar {\n    background: white;\n    color: black;\n    padding: 5px;\n    box-sizing: border-box;\n    font-weight: bold;\n}\n\n.livecss-window>.lc-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.livecss-window>.lc-content>.style-input {\n    flex: 1;\n    outline: none;\n    background: transparent;\n    color: white;\n    font-family: monospace;\n    font-size: 14px;\n    overflow: scroll;\n    white-space: pre;\n}\n\n.livecss-window>.lc-content>.style-input::selection {\n    background: royalblue;\n}\n";class LiveCSSApplication extends WApplication{constructor(){super(),this.schedInt=-1}async main(e){super.main(e),this.styleEl=document.createElement("style"),this.styleEl.textContent=CSS_CODE,document.body.appendChild(this.styleEl);const n=document.createElement("style");n.textContent="",this.liveStyleEl=n,document.head.appendChild(n),await this._createWindow()}async _createWindow(){const e=document.createElement("div");e.classList.add("livecss-window");const n=document.createElement("div");n.classList.add("lc-tbar"),e.appendChild(n);const t=document.createElement("div");t.textContent="LiveCSS",t.classList.add("title"),n.appendChild(t);const i=document.createElement("div");i.classList.add("lc-content"),e.appendChild(i),document.body.appendChild(e),$(e).draggable({cancel:".lc-content"}),$(e).resizable({handles:"n, s, w, e, ne, se, sw, nw"});const s=document.createElement("textarea");s.classList.add("style-input"),i.appendChild(s),s.addEventListener("keydown",(function(e){if("Tab"==e.key){e.preventDefault();var n=this.selectionStart,t=this.selectionEnd;this.value=this.value.substring(0,n)+"    "+this.value.substring(t),this.selectionStart=this.selectionEnd=n+4}})),s.addEventListener("input",(()=>{this.scheduleCSSChange(s.value)}))}scheduleCSSChange(e){-1===this.schedInt&&(this.schedInt=setTimeout((()=>{this.liveStyleEl.textContent=e,this.schedInt=-1}),100))}ontermination(){super.ontermination(),this.styleEl.remove(),this.styleEl=null,this.liveStyleEl.remove(),this.liveStyleEl=null}}

return await WApplication.execAsync(new LiveCSSApplication(), this.boxedEnv.args, this);